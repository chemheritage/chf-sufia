<form class="form-inline chf-constraints-query">
    <%= render_hash_as_hidden_fields(search_state.params_for_search.except(:q, :qt, :page, :utf8)) %>

    <label class="sr-only" for="constraintsQueryInput">Query</label>
    <span class="input-group">
      <%= text_field_tag "q", local_assigns[:params].try { |h| h[:q] }, placeholder: "Add a query", class: "form-control input-sm", id: "constraintsQueryInput" %>
      <label class="sr-only" for="constraintsQueryInput">Query</label>
      <span class="input-group-btn">
        <% if params[:q].present? %>
          <%= link_to(search_state.params_for_search.except(:q, :qt, :page, :utf8),  { class:"btn btn-sm btn-primary", title:"Remove" }) do %>
            <span class="glyphicon glyphicon-remove"></span><span class="sr-only">Remove</span>
          <% end %>
        <% end %>
        <button type="submit" class="btn btn-sm btn-primary" title="Search">
          <span class="glyphicon glyphicon-search"></span><span class="sr-only">Search</span>
        </button>
      </span>
    </span>
</form>
